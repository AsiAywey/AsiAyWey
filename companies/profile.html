<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>AsíAyWey - Company Profile</title>
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
        />
        <link rel="stylesheet" href="../styles/profile_company.css" />
        <link rel="stylesheet" href="../styles/style-companies.css" />
        <link rel="stylesheet" href="../styles/topbar.css" />
    </head>
    <body>
        <header class="navbar app-topbar">
            <div class="logo">◆ AsíAyWey</div>

            <nav class="menu topbar-menu">
                <a href="../dashboard.html" class="topbar-link">Dashboard</a>
                <a href="../jobs.html" class="topbar-link">Jobs</a>
                <a href="profile.html" class="topbar-link active"
                    >Company Profile</a
                >
                <a href="../login.html" class="topbar-action">
                    <i class="bi bi-box-arrow-right" aria-hidden="true"></i>
                    Logout
                </a>
            </nav>

            <div class="user-info">
                <div class="user-text">
                    <strong id="headerUserName">User</strong>
                    <span id="headerUserRole">Role</span>
                </div>
                <div class="user-avatar" id="headerAvatar">
                    <i
                        class="bi bi-person-circle user-avatar-icon"
                        aria-hidden="true"
                    ></i>
                    <img
                        id="headerAvatarImg"
                        class="user-avatar-img"
                        alt="User avatar"
                    />
                </div>
            </div>
        </header>

        <main class="container py-4">
            <p class="breadcrumb">Company Profile</p>

            <div id="message" class="message message-hidden"></div>

            <!-- PROFILE CARD -->
            <section class="card profile">
                <div class="profile-left">
                    <img
                        id="companyLogo"
                        class="avatar company-logo-style nav-avatar-hidden"
                        alt="Company logo"
                    />
                    <div class="company-info-section">
                        <h1 id="companyName">Loading...</h1>
                        <p id="companyIndustry" class="company-field">--</p>
                        <p class="muted company-field" id="companyLocation">
                            --
                        </p>
                        <p id="companyDescription" class="company-description">
                            No description added
                        </p>
                    </div>
                </div>
            </section>

            <!-- TABS -->
            <div class="tabs-header nav nav-tabs mb-3" role="tablist">
                <button
                    class="tab-btn tab-button nav-link active"
                    data-tab="candidates"
                    role="tab"
                >
                    Search Candidates (OTW)
                </button>
                <button
                    class="tab-btn tab-button nav-link"
                    data-tab="joboffers"
                    role="tab"
                >
                    My Job Offers
                </button>
                <button
                    class="tab-btn tab-button nav-link"
                    data-tab="matches"
                    role="tab"
                >
                    My Matches
                </button>
                <button
                    class="tab-btn tab-button nav-link"
                    data-tab="reservations"
                    role="tab"
                >
                    Reservations
                </button>
            </div>

            <!-- TAB CONTENT: CANDIDATES -->
            <div id="candidatesTab" class="tab-content card">
                <h3>Available Candidates (Open to Work)</h3>
                <p class="tab-description">
                    Select candidates and match them with your job offers
                </p>
                <div id="candidatesList" class="tab-list"></div>
            </div>

            <!-- TAB CONTENT: JOB OFFERS -->
            <div id="joboffersTab" class="tab-content card tab-content-hidden">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3 class="mb-0">My Job Offers</h3>
                    <button class="btn btn-primary" id="toggleCreateJobBtn">
                        <i class="bi bi-plus-lg"></i> New Job Offer
                    </button>
                </div>
                
                <!-- Create Job Form -->
                <div id="createJobForm" class="create-job-form" style="display: none;">
                    <h4>Create New Job Offer</h4>
                    <form id="newJobForm">
                        <div class="mb-3">
                            <label for="newJobTitle" class="form-label">Job Title</label>
                            <input type="text" class="form-control" id="newJobTitle" required>
                        </div>
                        <div class="mb-3">
                            <label for="newJobDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="newJobDescription" rows="3" required></textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="newJobSkills" class="form-label">Skills (comma separated)</label>
                                <input type="text" class="form-control" id="newJobSkills" placeholder="React, Node.js, SQL" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="newJobLocation" class="form-label">Location</label>
                                <input type="text" class="form-control" id="newJobLocation" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="newJobSalary" class="form-label">Salary Range</label>
                            <input type="text" class="form-control" id="newJobSalary" placeholder="$3000 - $5000" required>
                        </div>
                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-success">Create Job Offer</button>
                            <button type="button" class="btn btn-secondary" id="cancelCreateJob">Cancel</button>
                        </div>
                    </form>
                </div>
                
                <div id="jobOffersList" class="tab-list mt-3"></div>
            </div>

            <!-- TAB CONTENT: MATCHES -->
            <div id="matchesTab" class="tab-content card tab-content-hidden">
                <h3>My Matches</h3>
                <div id="matchesList" class="tab-list"></div>
            </div>

            <!-- TAB CONTENT: RESERVATIONS -->
            <div
                id="reservationsTab"
                class="tab-content card tab-content-hidden"
            >
                <h3>Active Reservations</h3>
                <div id="reservationsList" class="tab-list"></div>
            </div>
        </main>

        <!-- Edit Job Modal -->
        <div id="editJobModal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h4>Edit Job Offer</h4>
                    <button class="modal-close" onclick="closeEditJobModal()">&times;</button>
                </div>
                <form id="editJobForm">
                    <input type="hidden" id="editJobId">
                    <div class="mb-3">
                        <label for="editJobTitle" class="form-label">Job Title</label>
                        <input type="text" class="form-control" id="editJobTitle" required>
                    </div>
                    <div class="mb-3">
                        <label for="editJobDescription" class="form-label">Description</label>
                        <textarea class="form-control" id="editJobDescription" rows="3" required></textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="editJobSkills" class="form-label">Skills (comma separated)</label>
                            <input type="text" class="form-control" id="editJobSkills" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="editJobLocation" class="form-label">Location</label>
                            <input type="text" class="form-control" id="editJobLocation" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="editJobSalary" class="form-label">Salary Range</label>
                        <input type="text" class="form-control" id="editJobSalary" required>
                    </div>
                    <div class="d-flex gap-2 justify-content-end">
                        <button type="button" class="btn btn-secondary" onclick="closeEditJobModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>

        <footer class="footer">
            MATCHFLOW © 2024 • RECRUITMENT INTELLIGENCE PLATFORM
        </footer>

        <script type="module" src="profile.js"></script>
    </body>
</html>
